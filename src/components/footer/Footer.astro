---
import Text from '@components/common/Text.astro';
import Icon from '@components/common/Icon.astro';
import FooterList from './FooterList.astro';
import { getContent } from '@utils/contentLoader';

const currentYear = new Date().getFullYear();
export const prerender = true;
const footerContent = await getContent('footer');
if (!footerContent) {
  return Astro.redirect('/404');
}
const { quickLinks, contactInfo, socialLinks, description } =
  footerContent.frontmatter;

console.log(footerContent);
---

<footer class='bg-secondary dark:bg-secondary-dark'>
  <div class='container mx-auto px-4 py-12'>
    <div class='grid grid-cols-1 md:grid-cols-3 gap-8'>
      <div>
        <Icon
          name='nodesign-brand-light'
          width={200}
          class='mb-4'
        />
        <Text
          level='small'
          color='light'
        >
          {description}
        </Text>
      </div>
      <FooterList
        title='Brzi linkovi'
        items={quickLinks}
      />
      <FooterList
        title='Kontakt informacije'
        items={contactInfo}
      />
    </div>
    <div
      class='border-t border-neutral-700 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center'
    >
      <Text
        level='small'
        color='light'
      >
        &copy; {currentYear} NoDesign. Sva prava zadr≈æana.
      </Text>
      <div class='flex space-x-4 mt-4 md:mt-0'>
        {
          socialLinks.map((link) => (
            <a
              href={link.url}
              target='_blank'
              rel='noopener noreferrer'
            >
              <Icon
                name={link.icon}
                width={24}
                height={24}
              />
            </a>
          ))
        }
      </div>
    </div>
  </div>
</footer>
