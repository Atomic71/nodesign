---
import MobileMenuToggle from '@components/MobileMenuToggle.astro';
import MobileMenu from '@components/MobileMenu.astro';
import Icon from './common/Icon.astro';
import ThemeToggle from './ThemeToggle.astro';
---

<header
  class='fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-background-light dark:bg-background-dark'
  id='main-header'
>
  <nav class='container mx-auto px-4 py-4'>
    <div class='flex justify-between items-center'>
      <a
        href={`/`}
        class='text-2xl font-display font-bold text-primary dark:text-primary-light'
      >
        <Icon
          name='nodesign-brand-light'
          width={200}
          class='text-current hidden dark:block'
          id='nodesign-brand-logo-dark'
        />
        <Icon
          name='nodesign-brand-dark'
          width={200}
          class='text-current dark:hidden'
          id='nodesign-brand-logo-light'
        />
      </a>

      <!-- Desktop Navigation -->
      <div class='hidden md:flex space-x-8 items-center'>
        <a
          href={`/o-nama`}
          class='text-secondary dark:text-secondary-light hover:text-primary dark:hover:text-primary-light transition-colors'
          >O nama</a
        >
        <a
          href={`/kontakt`}
          class='text-secondary dark:text-secondary-light hover:text-primary dark:hover:text-primary-light transition-colors'
          >Kontakt</a
        >
        <ThemeToggle />
      </div>

      <!-- Mobile Navigation Toggle -->
      <div class='md:hidden'>
        <MobileMenuToggle />
      </div>
    </div>
  </nav>
</header>

<MobileMenu />

<style>
  #main-header {
    transition:
      background-color 0.3s ease,
      box-shadow 0.3s ease;
  }

  #main-header.scrolled {
    @apply bg-white shadow-md;
  }

  #main-header.scrolled .text-nodesign-primary,
  #main-header.scrolled .text-gray-500 {
    @apply text-gray-800;
  }

  #main-header:not(.scrolled) .text-nodesign-primary,
  #main-header:not(.scrolled) .text-gray-500 {
    @apply text-white;
  }
</style>

<script>
  const header = document.getElementById('main-header');
  const logoIcon = document.getElementById('nodesign-brand-logo');

  const scrollThreshold = 50;

  function updateHeaderBackground() {
    if (window.scrollY > scrollThreshold) {
      header?.classList.add('scrolled');
      logoIcon?.setAttribute('src', '/icons/nodesign-brand-black.svg');
    } else {
      header?.classList.remove('scrolled');
      logoIcon?.setAttribute('src', '/icons/nodesign-brand-white.svg');
    }
  }

  window.addEventListener('scroll', updateHeaderBackground);
  updateHeaderBackground();
</script>
