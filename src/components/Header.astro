---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
---

<header>
	<nav class="flex flex-wrap items-center container">
		<img src="/images/logo.white.no.design.svg" class="logoheader w-1/3 md:w-1/6" alt="Logo">
		
		<!-- Linkovi za desktop -->
		<div class="internal-links w-full md:w-2/3 flex justify-center space-x-4 md:space-x-8 md:mt-0">
			<HeaderLink href="/">Početna</HeaderLink>
			<HeaderLink href="/#o-nama">O nama</HeaderLink>
			<HeaderLink href="/#projekti">Projekti</HeaderLink>
			<HeaderLink href="/#kontakt">Kontakt</HeaderLink>
		</div>
	
		<!-- Hamburger dugme za mobilnu verziju -->
		<button class="menu-toggle w-1/3 md:hidden flex items-center justify-end" aria-label="Toggle navigation">
			<span class="sr-only">Toggle navigation</span>
			<svg viewBox="0 0 24 24" aria-hidden="true" width="24" height="24">
				<path fill="white" d="M3 6h18v2H3zm0 4h18v2H3zm0 4h18v2H3z"></path>
			</svg>
		</button>
	
		<!-- Linkovi za društvene mreže, prikazuju se samo na desktopu -->
		<div class="social-links">
			<a href="#" target="_blank" class="flex items-center">
				<span class="sr-only">Bosanski</span>
				<span>BA</span>
			</a>
			<a href="#" target="_blank" class="flex items-center">
				<span class="sr-only">English</span>
				<span>EN</span>
			</a>
		</div>
	</nav>
	<!-- Mobilni meni koji se otvara preko celog ekrana -->
<div class="mobile-menu fixed hidden"> <!-- Dodao sam klasu 'hidden' da bi meni bio sakriven po defaultu -->
  <button class="menu-close absolute top-4 right-4" aria-label="Close menu">
    <span class="sr-only">Close menu</span>
    <svg width="40" height="40" viewBox="0 0 40 40">
      <path d="M 10,10 L 30,30 M 30,10 L 10,30" stroke="black" stroke-width="4"></path>
    </svg>
  </button>
  <div class="menu-content text-center">
    <a href="/" class="header-link">Početna</a>
    <a href="/#o-nama" class="header-link">O nama</a>
    <a href="/#projekti" class="header-link">Projekti</a>
    <a href="/#kontakt" class="header-link">Kontakt</a>
  </div>
</div>
</header>
<style>
	/* Osnovni stilovi za header */
header {
    margin: 0;
    position: absolute;
	z-index: 1;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
}

h2 {
    margin: 0;
    font-size: 1em;
}

h2 a {
    text-decoration: none;
    color: black;
}
.logoheader{
width: 200px;
height: 80px;
}
.social-links{
	display: contents;
	width: 200px;
}
.social-links a span{
	color: white;
	padding: 1em 0.5em;
  color: white;
  text-decoration: none;
  border-bottom: 4px solid transparent;
    border-bottom-color: transparent;
  line-height: 1.2;
  font-family: Rajdhani,sans-serif;
  text-transform: uppercase;
}

/* Stilovi za navigaciju i linkove */
nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.internal-links a {
	padding: 1em 0.5em;
  color: white;
  text-decoration: none;
  border-bottom: 4px solid transparent;
  line-height: 1.2;
  font-family: Rajdhani,sans-serif;
  text-transform: uppercase;
}
a[data-astro-cid-eimmu3lg].active {
  font-weight:normal;
  text-decoration:underline !important
}
.internal-links a:hover {
	text-decoration:underline !important
}

/* Hamburger dugme */
.menu-toggle {
    background: none;
    border: none;
    cursor: pointer;
    display: none;
}

.menu-toggle svg {
    width: 24px;
    height: 24px;
}

/* Početna pozicija menija, skriven iznad ekrana */
.mobile-menu {
    display: none;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
        background: white;
    z-index: 1000;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    /* Početna transformacija (sakriveno iznad ekrana) */
    transform: translateY(-100%);
    opacity: 0;
    transition: transform 0.5s ease, opacity 1s ease;
}

/* Kada je meni otvoren */
.mobile-menu.open {
    display: flex;
    transform: translateY(0); /* Meni dolazi na svoje mesto */
    opacity: 1;
}

/* Animacija za zatvaranje */
.mobile-menu.closing {
    transform: translateY(-100%); /* Meni se pomera nazad gore */
    opacity: 0;
}

/* Dugme za zatvaranje mobilnog menija */
.menu-close {
    position: absolute;
    top: 1em;
    right: 1em;
    background: none;
    border: none;
    cursor: pointer;
}

.menu-close svg {
    width: 24px;
    height: 24px;
}

/* Sadržaj menija centriran u sredini */
.menu-content {
    text-align: center;
}

.menu-content a {
    display: block;
    margin: 1em 0;
    font-size: 1.5em;
    color: black;
    text-decoration: none;
}

/* Prikaz hamburger menija i skrivanje drugih elemenata na mobilnim uređajima */
@media (max-width: 720px) {
    .menu-toggle {
        display: block;
    }

    .internal-links, .social-links {
        display: none;
    }

    .mobile-menu.open {
        display: flex;
    }
}

</style>
<script type="module">
	document.addEventListener('DOMContentLoaded', () => {
	  const menuToggle = document.querySelector('.menu-toggle');
	  const menuClose = document.querySelector('.menu-close');
	  const mobileMenu = document.querySelector('.mobile-menu');
  
	  if (menuToggle && menuClose && mobileMenu) {
		menuToggle.addEventListener('click', () => {
		  mobileMenu.classList.add('open');
		  mobileMenu.classList.remove('closing'); // Ukloniti 'closing' ako je ranije bio dodan
		});
  
		menuClose.addEventListener('click', () => {
		  mobileMenu.classList.add('closing');
		  
		  // Sačekaj animaciju pre nego što ukloniš klasu 'open'
		  mobileMenu.addEventListener('transitionend', () => {
		    mobileMenu.classList.remove('open');
		  }, { once: true }); // `once: true` osigurava da se ovaj događaj pokrene samo jednom
		});
	  }
	});

    // Pronađi mobilni meni i dugme za zatvaranje
  const mobileMenu = document.querySelector('.mobile-menu');
  const closeMenuButton = document.querySelector('.menu-close');
  const menuLinks = document.querySelectorAll('.menu-content a');

  // Funkcija za zatvaranje menija
  function closeMenu() {
    mobileMenu.classList.add('hidden');
  }

  // Klik na dugme za zatvaranje menija
  closeMenuButton.addEventListener('click', closeMenu);

  // Klik na bilo koji link u meniju
  menuLinks.forEach(link => {
    link.addEventListener('click', function () {
      closeMenu(); // Zatvori meni
      // Stranica se prirodno osvežava kad klikneš na link, nema potrebe za dodatnim kodom
    });
  });
</script>

